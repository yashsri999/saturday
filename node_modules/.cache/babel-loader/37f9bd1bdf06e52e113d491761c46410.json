{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventstream_marshaller_1 = require(\"@aws-sdk/eventstream-marshaller\");\n\nvar utils_1 = require(\"./utils\");\n\nvar getChunkedStream_1 = require(\"./getChunkedStream\");\n\nvar getEventMessageStream_1 = require(\"./getEventMessageStream\");\n\nvar getDeserializingStream_1 = require(\"./getDeserializingStream\");\n\nvar EventStreamMarshaller =\n/** @class */\nfunction () {\n  function EventStreamMarshaller(_a) {\n    var utf8Encoder = _a.utf8Encoder,\n        utf8Decoder = _a.utf8Decoder;\n    this.eventMarshaller = new eventstream_marshaller_1.EventStreamMarshaller(utf8Encoder, utf8Decoder);\n  }\n\n  EventStreamMarshaller.prototype.deserialize = function (body, deserializer) {\n    var chunkedStream = getChunkedStream_1.getChunkedStream(body);\n    var messageStream = getEventMessageStream_1.getEventMessageStream(chunkedStream, this.eventMarshaller);\n    var deserialingStream = getDeserializingStream_1.getDeserializingStream(messageStream, deserializer);\n    return utils_1.ReadableStreamtoIterable(deserialingStream);\n  };\n  /**\n   * Generate a ReadableStream that serialize events\n   * to event stream binary chunks; Use a pull stream\n   * here to support low connection speed.\n   *\n   * This doesn't work on browser currently because\n   * browser doesn't support upload streaming.\n   * reference:\n   * * https://bugs.chromium.org/p/chromium/issues/detail?id=688906\n   * * https://bugzilla.mozilla.org/show_bug.cgi?id=1387483\n   *\n   */\n\n\n  EventStreamMarshaller.prototype.serialize = function (input, serializer) {\n    throw new Error(\"event stream request in browser is not supported\\nReference: https://bugs.chromium.org/p/chromium/issues/detail?id=688906\");\n  };\n\n  return EventStreamMarshaller;\n}();\n\nexports.EventStreamMarshaller = EventStreamMarshaller;","map":null,"metadata":{},"sourceType":"script"}