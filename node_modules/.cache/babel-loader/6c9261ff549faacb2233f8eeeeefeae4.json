{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar protocol_http_1 = require(\"@aws-sdk/protocol-http\");\n\nfunction userAgentMiddleware(options) {\n  return function (next) {\n    return function (args) {\n      var request = args.request;\n      if (!protocol_http_1.HttpRequest.isInstance(request)) return next(args);\n      var headers = request.headers;\n      var userAgentHeader = options.runtime === \"node\" ? \"user-agent\" : \"x-amz-user-agent\";\n\n      if (!headers[userAgentHeader]) {\n        headers[userAgentHeader] = \"\" + options.defaultUserAgent;\n      } else {\n        headers[userAgentHeader] += \" \" + options.defaultUserAgent;\n      }\n\n      if (options.customUserAgent) {\n        headers[userAgentHeader] += \" \" + options.customUserAgent;\n      }\n\n      return next(tslib_1.__assign(tslib_1.__assign({}, args), {\n        request: request\n      }));\n    };\n  };\n}\n\nexports.userAgentMiddleware = userAgentMiddleware;\nexports.getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"]\n};\n\nexports.getUserAgentPlugin = function (config) {\n  return {\n    applyToStack: function applyToStack(clientStack) {\n      clientStack.add(userAgentMiddleware(config), exports.getUserAgentMiddlewareOptions);\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script"}