{"ast":null,"code":"import _objectSpread from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/src/components/ProductAdmin.js\";\nimport React, { Component, Fragment } from 'react';\nimport Product from './Product';\nimport axios from \"axios\";\n\nvar config = require('../config.json');\n\nvar ProductAdmin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductAdmin, _Component);\n\n  function ProductAdmin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductAdmin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductAdmin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      newproduct: {\n        \"productname\": \"\",\n        \"id\": \"\"\n      },\n      products: []\n    };\n\n    _this.handleAddProduct =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id, event) {\n        var params;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault(); // add call to AWS API Gateway add product endpoint here\n\n                _context.prev = 1;\n                params = {\n                  \"id\": id,\n                  \"productname\": _this.state.newproduct.productname\n                };\n                _context.next = 5;\n                return axios.post(\"\".concat(config.api.invokeUrl, \"/products/\").concat(id), params);\n\n              case 5:\n                _this.setState({\n                  products: [].concat(_toConsumableArray(_this.state.products), [_this.state.newproduct])\n                });\n\n                _this.setState({\n                  newproduct: {\n                    \"productname\": \"\",\n                    \"id\": \"\"\n                  }\n                });\n\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(\"An error has occurred: \".concat(_context.t0));\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleUpdateProduct =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(id, name) {\n        var params, productToUpdate, updatedProducts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                params = {\n                  \"id\": id,\n                  \"productname\": name\n                };\n                _context2.next = 4;\n                return axios.patch(\"\".concat(config.api.invokeUrl, \"/products/\").concat(id), params);\n\n              case 4:\n                productToUpdate = _toConsumableArray(_this.state.products).find(function (product) {\n                  return product.id === id;\n                });\n                updatedProducts = _toConsumableArray(_this.state.products).filter(function (product) {\n                  return product.id !== id;\n                });\n                productToUpdate.productname = name;\n                updatedProducts.push(productToUpdate);\n\n                _this.setState({\n                  products: updatedProducts\n                });\n\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"Error updating product: \".concat(_context2.t0));\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleDeleteProduct =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(id, event) {\n        var updatedProducts;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                event.preventDefault(); // add call to AWS API Gateway delete product endpoint here\n\n                _context3.prev = 1;\n                _context3.next = 4;\n                return axios.delete(\"\".concat(config.api.invokeUrl, \"/products/\").concat(id));\n\n              case 4:\n                updatedProducts = _toConsumableArray(_this.state.products).filter(function (product) {\n                  return product.id !== id;\n                });\n\n                _this.setState({\n                  products: updatedProducts\n                });\n\n                _context3.next = 11;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](1);\n                console.log(\"Unable to delete product: \".concat(_context3.t0));\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 8]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.fetchProducts =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var res, products;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.get(\"\".concat(config.api.invokeUrl, \"/products\"));\n\n            case 3:\n              res = _context4.sent;\n              products = res.data;\n\n              _this.setState({\n                products: products\n              });\n\n              _context4.next = 11;\n              break;\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(\"An error has occurred: \".concat(_context4.t0));\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 8]]);\n    }));\n\n    _this.onAddProductNameChange = function (event) {\n      return _this.setState({\n        newproduct: _objectSpread({}, _this.state.newproduct, {\n          \"productname\": event.target.value\n        })\n      });\n    };\n\n    _this.onAddProductIdChange = function (event) {\n      return _this.setState({\n        newproduct: _objectSpread({}, _this.state.newproduct, {\n          \"id\": event.target.value\n        })\n      });\n    };\n\n    _this.componentDidMount = function () {\n      _this.fetchProducts();\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductAdmin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Product Admin\"), React.createElement(\"p\", {\n        className: \"subtitle is-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Add and remove products using the form below:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-one-third\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          return _this2.handleAddProduct(_this2.state.newproduct.id, event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field has-addons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter name\",\n        value: this.state.newproduct.productname,\n        onChange: this.onAddProductNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter id\",\n        value: this.state.newproduct.id,\n        onChange: this.onAddProductIdChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"button is-primary is-medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Add product\"))))), React.createElement(\"div\", {\n        className: \"column is-two-thirds\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tile is-ancestor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tile is-4 is-parent  is-vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.state.products.map(function (product, index) {\n        return React.createElement(Product, {\n          isAdmin: true,\n          handleUpdateProduct: _this2.handleUpdateProduct,\n          handleDeleteProduct: _this2.handleDeleteProduct,\n          name: product.productname,\n          id: product.id,\n          key: product.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        });\n      }))))))));\n    }\n  }]);\n\n  return ProductAdmin;\n}(Component);\n\nexport { ProductAdmin as default };","map":{"version":3,"sources":["/Users/yash/Documents/AWS/aws-cognito-tutorial-starter-test/src/components/ProductAdmin.js"],"names":["React","Component","Fragment","Product","axios","config","require","ProductAdmin","state","newproduct","products","handleAddProduct","id","event","preventDefault","params","productname","post","api","invokeUrl","setState","console","log","handleUpdateProduct","name","patch","productToUpdate","find","product","updatedProducts","filter","push","handleDeleteProduct","delete","fetchProducts","get","res","data","onAddProductNameChange","target","value","onAddProductIdChange","componentDidMount","map","index"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Product from './Product';\nimport axios from \"axios\";\nconst config = require('../config.json');\n\nexport default class ProductAdmin extends Component {\n\n  state = {\n    newproduct: { \n      \"productname\": \"\", \n      \"id\": \"\"\n    },\n    products: []\n  }\n\n  handleAddProduct = async (id, event) => {\n    event.preventDefault();\n    // add call to AWS API Gateway add product endpoint here\n    try {\n      const params = {\n        \"id\": id,\n        \"productname\": this.state.newproduct.productname\n      };\n      await axios.post(`${config.api.invokeUrl}/products/${id}`, params);\n      this.setState({ products: [...this.state.products, this.state.newproduct] });\n      this.setState({ newproduct: { \"productname\": \"\", \"id\": \"\" }});\n    }catch (err) {\n      console.log(`An error has occurred: ${err}`);\n    }\n  }\n\n  handleUpdateProduct = async (id, name) => {\n    // add call to AWS API Gateway update product endpoint here\n    try {\n      const params = {\n        \"id\": id,\n        \"productname\": name\n      };\n      await axios.patch(`${config.api.invokeUrl}/products/${id}`, params);\n      const productToUpdate = [...this.state.products].find(product => product.id === id);\n      const updatedProducts = [...this.state.products].filter(product => product.id !== id);\n      productToUpdate.productname = name;\n      updatedProducts.push(productToUpdate);\n      this.setState({products: updatedProducts});\n    }catch (err) {\n      console.log(`Error updating product: ${err}`);\n    }\n  }\n\n  handleDeleteProduct = async (id, event) => {\n    event.preventDefault();\n    // add call to AWS API Gateway delete product endpoint here\n    try {\n      await axios.delete(`${config.api.invokeUrl}/products/${id}`);\n      const updatedProducts = [...this.state.products].filter(product => product.id !== id);\n      this.setState({products: updatedProducts});\n    }catch (err) {\n      console.log(`Unable to delete product: ${err}`);\n    }\n  }\n\n  fetchProducts = async () => {\n    // add call to AWS API Gateway to fetch products here\n    // then set them in state\n    try {\n      const res = await axios.get(`${config.api.invokeUrl}/products`);\n      const products = res.data;\n      this.setState({ products: products });\n    } catch (err) {\n      console.log(`An error has occurred: ${err}`);\n    }\n  }\n\n  onAddProductNameChange = event => this.setState({ newproduct: { ...this.state.newproduct, \"productname\": event.target.value } });\n  onAddProductIdChange = event => this.setState({ newproduct: { ...this.state.newproduct, \"id\": event.target.value } });\n\n  componentDidMount = () => {\n    this.fetchProducts();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <section className=\"section\">\n          <div className=\"container\">\n            <h1>Product Admin</h1>\n            <p className=\"subtitle is-5\">Add and remove products using the form below:</p>\n            <br />\n            <div className=\"columns\">\n              <div className=\"column is-one-third\">\n                <form onSubmit={event => this.handleAddProduct(this.state.newproduct.id, event)}>\n                  <div className=\"field has-addons\">\n                    <div className=\"control\">\n                      <input \n                        className=\"input is-medium\"\n                        type=\"text\" \n                        placeholder=\"Enter name\"\n                        value={this.state.newproduct.productname}\n                        onChange={this.onAddProductNameChange}\n                      />\n                    </div>\n                    <div className=\"control\">\n                      <input \n                        className=\"input is-medium\"\n                        type=\"text\" \n                        placeholder=\"Enter id\"\n                        value={this.state.newproduct.id}\n                        onChange={this.onAddProductIdChange}\n                      />\n                    </div>\n                    <div className=\"control\">\n                      <button type=\"submit\" className=\"button is-primary is-medium\">\n                        Add product\n                      </button>\n                    </div>\n                  </div>\n                </form>\n              </div>\n              <div className=\"column is-two-thirds\">\n                <div className=\"tile is-ancestor\">\n                  <div className=\"tile is-4 is-parent  is-vertical\">\n                    { \n                      this.state.products.map((product, index) => \n                        <Product \n                          isAdmin={true}\n                          handleUpdateProduct={this.handleUpdateProduct}\n                          handleDeleteProduct={this.handleDeleteProduct} \n                          name={product.productname} \n                          id={product.id}\n                          key={product.id}\n                        />)\n                    }\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </Fragment>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}