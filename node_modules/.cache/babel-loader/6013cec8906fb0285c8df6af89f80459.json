{"ast":null,"code":"import { SIGNATURE_HEADER } from \"./constants\";\nimport { escapeUri } from \"@aws-sdk/util-uri-escape\";\n/**\n * @internal\n */\n\nexport function getCanonicalQuery(_a) {\n  var _b = _a.query,\n      query = _b === void 0 ? {} : _b;\n  var keys = [];\n  var serialized = {};\n\n  var _loop_1 = function _loop_1(key) {\n    if (key.toLowerCase() === SIGNATURE_HEADER) {\n      return \"continue\";\n    }\n\n    keys.push(key);\n    var value = query[key];\n\n    if (typeof value === \"string\") {\n      serialized[key] = escapeUri(key) + \"=\" + escapeUri(value);\n    } else if (Array.isArray(value)) {\n      serialized[key] = value.slice(0).sort().reduce(function (encoded, value) {\n        return encoded.concat([escapeUri(key) + \"=\" + escapeUri(value)]);\n      }, []).join(\"&\");\n    }\n  };\n\n  for (var _i = 0, _c = Object.keys(query).sort(); _i < _c.length; _i++) {\n    var key = _c[_i];\n\n    _loop_1(key);\n  }\n\n  return keys.map(function (key) {\n    return serialized[key];\n  }).filter(function (serialized) {\n    return serialized;\n  }) // omit any falsy values\n  .join(\"&\");\n}","map":null,"metadata":{},"sourceType":"module"}